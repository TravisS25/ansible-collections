---
base_ca_options: &base_ca_options_ref
  cert:
    type: dict
    description: Settings to store the CA's cert
    options:
      dir_path:
        type: str
        default: /etc/ssl/ca-certs
        description: Root directory path where to store certs
      filename:
        type: str
        default: ca.pem
        description: Filename of private key
  key:
    type: dict
    description: Settings to store the CA's private key
    options:
      dir_path:
        type: str
        default: /etc/ssl/ca-keys
        description: Root directory path where to store keys
      filename:
        type: str
        default: ca.key
        description: Filename of private key

base_client_options: &base_client_options_ref
  ip:
    type: str
    required: true
    description: IP of ca client
  subject_alt_names:
    type: list
    required: true
    elements: str
    description: List of names to represent current host

argument_specs:
  server:
    short_description: Sets up CA server
    description: Sets up CA server so other droplets can use it for ssl
    options: *base_ca_options_ref

  client:
    short_description: Sets up client for CA
    description: Sets up client to make a CSR to our CA
    options:
      <<: [*base_ca_options_ref, *base_client_options_ref]
      ca_server:
        type: dict
        required: true
        description: Object settings for CA server
        options:
          <<: *base_ca_options_ref
          ip:
            type: str
            required: true
            description: IP of CA server to get cert signed by
